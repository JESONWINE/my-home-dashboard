📦 Alist 匿名访问配置指南（用于 React 控制面板嵌入 iframe）

本指南适用于：

使用 Vite + React + Ant Design 搭建控制面板时，希望通过 iframe 嵌入 Alist 网页界面

但发现 iframe 页面空白或跳转到登录页，排查后确定不是 CSP 或 X-Frame-Options 拦截

✅ 问题来源

Alist 默认首页通常需要登录，iframe 加载时因为无法共享登录态，会导致页面始终跳转到登录页，从而在 iframe 中显示空白或失败。

✅ 解决方案：配置匿名访问 + 默认公开目录

🪜 第一步：添加一个本地存储（或任意你已有的存储）

打开 Alist 后台（如：http://192.168.0.5:5244）

登录管理员账号

左侧点击「存储」或「挂载点」（不同版本菜单可能不同）

点击右上角 “添加”

类型选择：本地（Local）

路径填写你的某个本地目录路径，例如：

Linux: /home/alist/data

Windows: D:\Data

其他保持默认，点击保存

🔓 第二步：设置为匿名访问（允许未登录访问）

添加成功后，在存储列表中点击该项右侧的“编辑”按钮 ✏️

查看下列设置项并调整：

✅ 开启匿名访问

✅ 默认公开 或 关闭“登录后可见”

保存

📁 第三步：测试是否成功

打开浏览器，访问你的首页地址（例如 http://192.168.0.5:5244）

检查是否：

没有跳转到登录页

可以直接看到你设置的目录内容

若成功，则说明 iframe 现在可直接加载该页面

✅ 在 React 控制面板中的设置

const urlMap = {
  alist: 'http://192.168.0.5:5244',
  ddnsgo: 'http://localhost:9876',
  clash: 'http://localhost:9090',
};

确保 iframe 中的地址与实际 Alist 网页地址一致，并已开放匿名访问。

📝 说明

这项设置不会影响你通过登录账号进行高级操作（如文件上传/删除）

只是在未登录状态下允许查看页面内容，以便在控制面板 iframe 中正常加载

如需更复杂的权限控制，可配合 Alist 用户角色管理设置公开/私有目录路径。

（完）

